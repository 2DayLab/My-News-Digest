# ═══════════════════════════════════════════════════════════════
# 범용 뉴스 자동 요약 시스템 - 설정 파일
# ═══════════════════════════════════════════════════════════════
# 이 파일을 수정하여 원하는 뉴스 소스와 동작을 설정할 수 있습니다.
# 국가, 언어, 주제에 관계없이 모든 RSS 피드를 지원합니다.
# ═══════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────
# RSS 피드 설정
# ───────────────────────────────────────────────────────────────
# 원하는 뉴스 소스의 RSS 피드 URL을 추가하세요.
# 국가, 언어, 주제 제한 없이 모든 RSS 피드 사용 가능합니다.
# ───────────────────────────────────────────────────────────────

rss_feeds:
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # 인도네시아 뉴스
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  
  #  - name: "CNBC Indonesia"
  #    url: "https://www.cnbcindonesia.com/news/rss"
  #    enabled: true
  #    priority: 1
  #    description: "경제/금융 전문"
  
  - name: "Tempo.co"
    url: "https://rss.tempo.co/nasional"
    enabled: true
    priority: 1
    description: "종합 뉴스, 인도네시아어"
  
  - name: "Antara News"
    url: "https://www.antaranews.com/rss/terkini.xml"
    enabled: true
    priority: 2
    description: "국영 통신사, 실시간 뉴스"

  - name: "Detik"
    url: "https://news.detik.com/berita/rss"
    enabled: true
    priority: 3
    description: "최대 온라인 뉴스, 인도네시아어"

  - name: "CNA"
    url: "https://www.cna.id/api/v1/rss-outbound-feed?_format=xml"
    enabled: true
    priority: 4
    description: "온라인 뉴스, 인도네시아어"
    
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # 국제 뉴스 (예시)
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  
  #  - name: "BBC News"
  #    url: "http://feeds.bbci.co.uk/news/rss.xml"
  #    enabled: true
  #    priority: 1
  #    description: "BBC 국제 뉴스"
  
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # 한국 뉴스 (예시)
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  
  #  - name: "연합뉴스"
  #    url: "https://www.yna.co.kr/rss/news.xml"
  #    enabled: false
  #    priority: 3
  #    description: "한국 종합 뉴스"
  
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # 기술/IT 뉴스 (예시)
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  
  #  - name: "TechCrunch"
  #    url: "https://techcrunch.com/feed/"
  #    enabled: false
  #    priority: 5
  #    description: "기술 스타트업 뉴스"
  
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # 경제/금융 뉴스 (예시)
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  
  #  - name: "Bloomberg"
  #    url: "https://www.bloomberg.com/feed/podcast/etf-report.xml"
  #    enabled: false
  #    priority: 7
  #    description: "경제 금융 뉴스"
  
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # 추가 방법 안내
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # 
  # 1. RSS 피드 URL 찾기:
  #    - 뉴스 사이트에서 RSS 아이콘 찾기
  #    - 또는 Google 검색: "사이트명 RSS feed"
  # 
  # 2. 아래 형식으로 추가:
  #    - name: "뉴스 소스 이름"
  #      url: "RSS 피드 URL"
  #      enabled: true
  #      priority: 숫자 (낮을수록 우선순위 높음)
  #      description: "간단한 설명"
  # 
  # 3. enabled를 false로 설정하면 임시 비활성화
  # 
  # 4. priority: 1이 가장 높은 우선순위
  # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# ───────────────────────────────────────────────────────────────
# 뉴스 수집 설정
# ───────────────────────────────────────────────────────────────
collection:
  # 소스당 최대 수집 기사 수 (1~100)
  max_articles_per_source: 15
  
  # 전체 최대 수집 기사 수 (1~200)
  max_total_articles: 50
  
  # 수집할 기사의 시간 범위 (시간 단위, 1~168)
  # 24 = 최근 24시간, 48 = 최근 48시간
  hours_threshold: 24
  
  # HTTP 요청 타임아웃 (초, 1~60)
  request_timeout: 10
  
  # 네트워크 오류 시 재시도 횟수 (1~10)
  max_retries: 3
  
  # User-Agent 로테이션 활성화 (403 차단 방지)
  rotate_user_agent: true

# ───────────────────────────────────────────────────────────────
# AI 요약 설정 (Google Gemini)
# ───────────────────────────────────────────────────────────────
ai:
  # ✅ 2026년 권장 모델: Gemini 2.5 Flash
  # - 안정적 (Stable)
  # - 빠름 (8~12초)
  # - 고품질 (95% 정확도)
  # - 무료 (일 1,000회)
  model: "gemini-2.5-flash"

  # 대안 모델 (필요시 변경)
  # model: "gemini-2.5-flash-lite"  # 더 빠름, 품질 약간 낮음
  # model: "gemini-2.5-pro"         # 최고 품질, 느림, 제한적 무료
  
  # Temperature (0.0~2.0)
  # 낮을수록 일관성 높음, 높을수록 창의적
  temperature: 0.3
  
  # 최대 출력 토큰 수 (100~8192)
  max_output_tokens: 2048
  
  # Top-p 샘플링 (0.0~1.0)
  top_p: 0.9
  
  # Top-k 샘플링 (1~100)
  top_k: 40
  
  # 최종 요약할 뉴스 개수 (1~50)
  # 수집한 전체 기사 중 가장 중요한 N개만 선별
  summary_count: 10
  
  # 요약 언어
  # ko: 한국어, en: 영어, ja: 일본어, zh: 중국어, id: 인도네시아어
  language: "ko"
  
  # 안전 설정 (뉴스는 일반적으로 안전 필터 낮게 설정)
  safety_settings:
    harassment: "BLOCK_NONE"
    hate_speech: "BLOCK_NONE"
    sexually_explicit: "BLOCK_NONE"
    dangerous_content: "BLOCK_NONE"

# ───────────────────────────────────────────────────────────────
# 텔레그램 발송 설정
# ───────────────────────────────────────────────────────────────
telegram:
  # 최대 메시지 길이 (텔레그램 한도: 4096자)
  # 초과 시 자동 분할
  max_message_length: 4000
  
  # 링크 미리보기 비활성화
  disable_preview: true
  
  # 메시지 형식 (Markdown 또는 HTML)
  parse_mode: "Markdown"
  
  # 발송 실패 시 재시도
  retry_on_error: true
  
  # 여러 메시지 발송 시 간격 (초)
  send_interval: 0.5

  # Markdown 특수문자 자동 이스케이프 (발송 실패 방지)
  escape_markdown: true

# ───────────────────────────────────────────────────────────────
# 로깅 설정
# ───────────────────────────────────────────────────────────────
logging:
  # 로그 레벨: DEBUG, INFO, WARNING, ERROR
  # 문제 발생 시 DEBUG로 변경하여 상세 로그 확인
  level: "INFO"
  
  # 로그 출력 형식
  format: "%(asctime)s [%(levelname)s] %(message)s"
  
  # 날짜 형식
  date_format: "%Y-%m-%d %H:%M:%S"

# ───────────────────────────────────────────────────────────────
# 프롬프트 커스터마이징
# ───────────────────────────────────────────────────────────────
# AI에게 전달할 프롬프트를 수정할 수 있습니다.
# 사용 가능한 변수:
#   {summary_count} - 요약할 뉴스 개수
#   {language} - 요약 언어
#   {articles_text} - 수집한 기사 목록
#   {hours_threshold} - 수집 시간 범위
#   {current_time} - 현재 시간
# ───────────────────────────────────────────────────────────────

prompts:
  summary: |
    당신은 전문 뉴스 편집자입니다.
    최근 {hours_threshold}시간 내 뉴스 기사들을 분석하여,
    가장 중요한 {summary_count}개 뉴스를 선별하고 요약해주세요.
    
    [핵심 요구사항]
    1. 다양한 분야에서 균형있게 선별 (정치, 경제, 사회, 기술, 국제 등)
    2. 동일 사건은 하나로 통합 (중복 제거)
    3. 각 뉴스를 {language} 언어로 간결하게 요약 (1~2문장)
    4. 사실 중심, 추측 배제
    5. 불확실한 정보는 생략
    6. 반드시 {summary_count}개 채우기
    
    [수집된 기사 목록]
    {articles_text}
    
    [출력 형식]
    📰 **오늘의 핵심 뉴스**
    ━━━━━━━━━━━━━━━━━━
    
    1. **[소스명] 제목**
       → 핵심 요약 (사실 중심, 1~2문장)
    
    2. **[소스명] 제목**
       → 핵심 요약
    
    ... (총 {summary_count}개)
    
    ━━━━━━━━━━━━━━━━━━
    🤖 *AI 자동 요약*

# ═══════════════════════════════════════════════════════════════
# 2026년 2월 최적화 사항
# ═══════════════════════════════════════════════════════════════
# ✅ Gemini 2.5 Flash 적용 (안정적, 빠름, 무료)
# ✅ User-Agent 로테이션 활성화 (403 차단 방지)
# ✅ Markdown 자동 이스케이프 (발송 실패 방지)
# ✅ 토큰 카운팅 및 스마트 자르기 (429 에러 방지)
# ═══════════════════════════════════════════════════════════════
